import { writeFileSync } from "fs";

const XD = [
  {
    "4": 27,
    "6": 35,
    "10": 48,
    "16": 64,
    "25": 84,
    "35": 103,
    "50": 125,
    "70": 158,
    "95": 191,
    "120": 220,
    "150": 253,
    "185": 288,
    "240": 338,
    "300": 387,
    obwód: "1 fazowy",
    "liczba żył w kablu": 3,
    "liczba żył obciążonych prądowo": 2,
    "metoda referencyjna": "A1",
    "przekrój żyły": "obciążalność prądowa",
    "1,5": "",
    "2,5": 20,
  },
  {
    "4": 25,
    "6": 32,
    "10": 44,
    "16": 58,
    "25": 76,
    "35": 94,
    "50": 113,
    "70": 142,
    "95": 171,
    "120": 197,
    "150": 226,
    "185": 256,
    "240": 300,
    "300": 344,
    obwód: "3 fazowy",
    "liczba żył w kablu": "4 lub 5",
    "liczba żył obciążonych prądowo": 3,
    "metoda referencyjna": "A1",
    "przekrój żyły": "obciążalność prądowa",
    "1,5": "",
    "2,5": 19,
  },
  {
    "4": 26,
    "6": 33,
    "10": 45,
    "16": 60,
    "25": 78,
    "35": 96,
    "50": 115,
    "70": 145,
    "95": 175,
    "120": 201,
    "150": 230,
    "185": 262,
    "240": 307,
    "300": 352,
    obwód: "1 fazowy",
    "liczba żył w kablu": 3,
    "liczba żył obciążonych prądowo": 2,
    "metoda referencyjna": "A2",
    "przekrój żyły": "obciążalność prądowa",
    "1,5": "",
    "2,5": "19,5",
  },
  {
    "4": 24,
    "6": 31,
    "10": 41,
    "16": 55,
    "25": 71,
    "35": 87,
    "50": 104,
    "70": 131,
    "95": 157,
    "120": 180,
    "150": 206,
    "185": 233,
    "240": 273,
    "300": 313,
    obwód: "3 fazowy",
    "liczba żył w kablu": "4 lub 5",
    "liczba żył obciążonych prądowo": 3,
    "metoda referencyjna": "A2",
    "przekrój żyły": "obciążalność prądowa",
    "1,5": "",
    "2,5": 18,
  },
  {
    "4": 31,
    "6": 40,
    "10": 54,
    "16": 72,
    "25": 94,
    "35": 115,
    "50": 138,
    "70": 175,
    "95": 210,
    "120": 242,
    "150": 261,
    "185": 300,
    "240": 358,
    "300": 415,
    obwód: "1 fazowy",
    "liczba żył w kablu": 3,
    "liczba żył obciążonych prądowo": 2,
    "metoda referencyjna": "B2",
    "przekrój żyły": "obciążalność prądowa",
    "1,5": "",
    "2,5": 23,
  },
  {
    "4": 28,
    "6": 35,
    "10": 48,
    "16": 64,
    "25": 84,
    "35": 103,
    "50": 124,
    "70": 156,
    "95": 188,
    "120": 216,
    "150": 240,
    "185": 272,
    "240": 318,
    "300": 364,
    obwód: "3 fazowy",
    "liczba żył w kablu": "4 lub 5",
    "liczba żył obciążonych prądowo": 3,
    "metoda referencyjna": "B2",
    "przekrój żyły": "obciążalność prądowa",
    "1,5": "",
    "2,5": 21,
  },
  {
    "4": 38,
    "6": 49,
    "10": 67,
    "16": 91,
    "25": 108,
    "35": 135,
    "50": 164,
    "70": 211,
    "95": 257,
    "120": 300,
    "150": 346,
    "185": 397,
    "240": 470,
    "300": 543,
    obwód: "1 fazowy",
    "liczba żył w kablu": 3,
    "liczba żył obciążonych prądowo": 2,
    "metoda referencyjna": "E",
    "przekrój żyły": "obciążalność prądowa",
    "1,5": "",
    "2,5": 28,
  },
  {
    "4": 32,
    "6": 42,
    "10": 58,
    "16": 77,
    "25": 97,
    "35": 120,
    "50": 146,
    "70": 187,
    "95": 227,
    "120": 263,
    "150": 304,
    "185": 347,
    "240": 409,
    "300": 471,
    obwód: "3 fazowy",
    "liczba żył w kablu": "4 lub 5",
    "liczba żył obciążonych prądowo": 3,
    "metoda referencyjna": "E",
    "przekrój żyły": "obciążalność prądowa",
    "1,5": "",
    "2,5": 24,
  },
  {
    "4": "",
    "6": "",
    "10": "",
    "16": 114,
    "25": 147,
    "35": 175,
    "50": 208,
    "70": 255,
    "95": 306,
    "120": 349,
    "150": 391,
    "185": 444,
    "240": 514,
    "300": 579,
    obwód: "1 fazowy",
    "liczba żył w kablu": 3,
    "liczba żył obciążonych prądowo": 2,
    "metoda referencyjna": "D2",
    "przekrój żyły": "obciążalność prądowa",
    "1,5": "",
    "2,5": "",
  },
  {
    "4": "",
    "6": "",
    "10": "",
    "16": 96,
    "25": 123,
    "35": 147,
    "50": 175,
    "70": 216,
    "95": 258,
    "120": 295,
    "150": 330,
    "185": 375,
    "240": 435,
    "300": 489,
    obwód: "3 fazowy",
    "liczba żył w kablu": "4 lub 5",
    "liczba żył obciążonych prądowo": 3,
    "metoda referencyjna": "D2",
    "przekrój żyły": "obciążalność prądowa",
    "1,5": "",
    "2,5": "",
  },
  {
    "4": 38,
    "6": 49,
    "10": 64,
    "16": 83,
    "25": 106,
    "35": 127,
    "50": 151,
    "70": 186,
    "95": 219,
    "120": 248,
    "150": 280,
    "185": 315,
    "240": 362,
    "300": 408,
    obwód: "1 fazowy",
    "liczba żył w kablu": 3,
    "liczba żył obciążonych prądowo": 2,
    "metoda referencyjna": "D1",
    "przekrój żyły": "obciążalność prądowa",
    "1,5": "",
    "2,5": 30,
  },
  {
    "4": 33,
    "6": 41,
    "10": 54,
    "16": 69,
    "25": 88,
    "35": 106,
    "50": 125,
    "70": 153,
    "95": 181,
    "120": 205,
    "150": 232,
    "185": 259,
    "240": 298,
    "300": 337,
    obwód: "3 fazowy",
    "liczba żył w kablu": "4 lub 5",
    "liczba żył obciążonych prądowo": 3,
    "metoda referencyjna": "D1",
    "przekrój żyły": "obciążalność prądowa",
    "1,5": "",
    "2,5": 25,
  },
];

const res = XD.map((item) => {
  const installationMethod = item["metoda referencyjna"] ?? null;
  const veinCrossing = item["przekrój żyły"] ?? null;
  const liczbaZyli = item["liczba żył"] ?? item["liczba żył w kablu"] ?? null;
  const liczbaZyliObciazonychPradowo =
    item["liczba żył obciążonych prądowo"] ?? null;
  const circuit = item.obwód ?? null;

  const numbers = Object.keys(item)
    .filter(
      (key) =>
        key !== "metoda referencyjna" &&
        key !== "przekrój żyły" &&
        key !== "obwód" &&
        key !== "liczba żył" &&
        key !== "liczba żył w kablu" &&
        key !== "liczba żył obciążonych prądowo",
    )
    .map((key) => ({
      loadCurrent:
        (typeof item[key] === "number"
          ? item[key]
          : parseFloat(item[key].replace(",", "."))) ?? null,
      crossSectionOfVein: key,
    }))
    .sort((a, b) => a.loadCurrent - b.loadCurrent);

  return {
    installationType: installationMethod,
    numberOfPhases: parseInt(circuit.split(" ")[0]),
    veinCrossing,
    liczbaZyli,
    liczbaZyliObciazonychPradowo,
    numbers,
  };
});
const title = "YAKXS-wielozylowy";

writeFileSync(`kable/${title}.json`, JSON.stringify(res));
